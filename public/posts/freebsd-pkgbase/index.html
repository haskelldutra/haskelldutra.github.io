<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>haskelldutra/posts/freebsd-pkgbase/</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <meta name="googlebot" content="index,follow,snippet,archive">
    <link rel="stylesheet" href="https://haskelldutra.github.io/hugo-theme-console/css/terminal-0.7.4.min.css">
    <link rel="stylesheet" href="https://haskelldutra.github.io/hugo-theme-console/css/animate-4.1.1.min.css">
    <link rel="stylesheet" href="https://haskelldutra.github.io/hugo-theme-console/css/console.css">
    
      <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
       <meta property="og:title" content="Migrating from FreeBSD RELEASE to CURRENT" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://haskelldutra.github.io/posts/freebsd-pkgbase/" /><meta property="article:published_time" content="2024-06-02T00:00:00+00:00" />



<meta name="twitter:title" content="Migrating from FreeBSD RELEASE to CURRENT"/>
<meta name="twitter:description" content="Migrating from FreeBSD RELEASE to CURRENT without compiling."/>

</head>
<body class="terminal">
    <div class="container">
        <div class="terminal-nav">
          <header class="terminal-logo">
            <div class="logo terminal-prompt">
              
              
              <a href="https://haskelldutra.github.io/" class="no-style ">haskelldutra</a>:~# 
              <a href='https://haskelldutra.github.io/posts'>posts</a>/<a href='https://haskelldutra.github.io/posts/freebsd-pkgbase'>freebsd-pkgbase</a>/</div></header>
          <nav class="terminal-menu">
            <ul vocab="https://schema.org/" typeof="BreadcrumbList">
                
                <li><a href="https://haskelldutra.github.io/about/" typeof="ListItem">About/</a></li>
                
                <li><a href="https://haskelldutra.github.io/posts/" typeof="ListItem">Posts/</a></li>
                
                <li><a href="https://haskelldutra.github.io/photos/" typeof="ListItem">Photos/</a></li>
                
                <li><a href="https://github.com/haskelldutra" typeof="ListItem">GitHub/</a></li>
                
                <li><a href="https://linkedin.com/in/haskelldutra" typeof="ListItem">LinkedIn/</a></li>
                
            </ul>
          </nav>
        </div>
    </div>

    <div class="container animated zoomIn fast" >
        
<h1>Migrating from FreeBSD RELEASE to CURRENT</h1>

Jun. 2, 2024


<br/><br/>
<p>Migrating from FreeBSD RELEASE to CURRENT without compiling.</p>
<h2 id="release-neofetch">RELEASE neofetch</h2>
<p><img src="https://haskelldutra.github.io/freebsd-release.png" alt=""></p>
<h2 id="pkgbase">Pkgbase</h2>
<p>The pkgbase distribute the FreeBSD OS in packages. This allows you to update your operating system using
just the pkg.</p>
<h3 id="creating-the-repository">Creating the repository</h3>
<p>We need to add a new repository to download the base system.</p>
<pre tabindex="0"><code>cat &lt;&lt;EOF &gt;/etc/pkg/base.conf

base: {
  url: &#34;pkg+https://pkg.FreeBSD.org/\${ABI}/base_latest&#34;,
  mirror_type: &#34;srv&#34;,
  signature_type: &#34;fingerprints&#34;,
  fingerprints: &#34;/usr/share/keys/pkg&#34;,
  enabled: yes
}
EOF
</code></pre><h3 id="updating-the-repository">Updating the repository</h3>
<pre tabindex="0"><code>pkg update
</code></pre><h3 id="install-base-packages">Install base packages</h3>
<pre tabindex="0"><code>env IGNORE_OSVERSION=yes ABI=FreeBSD:15:amd64 pkg install -r base -g &#39;FreeBSD-*&#39;
</code></pre><h3 id="restore-files">Restore files</h3>
<pre tabindex="0"><code>cp /etc/master.passwd.pkgsave /etc/master.passwd
cp /etc/group.pkgsave /etc/group
pwd_mkdb -p /etc/master.passwd
cp /etc/sysctl.conf.pkgsave /etc/sysctl.conf
</code></pre><h3 id="deleting-old-files">Deleting old files</h3>
<pre tabindex="0"><code>find / -name \*.pkgsave -delete
rm /boot/kernel/linker.hints
</code></pre><p><img src="https://haskelldutra.github.io/freebsd-current.png" alt=""></p>
<h2 id="reference">Reference</h2>
<p><a href="https://wiki.freebsd.org/PkgBase">https://wiki.freebsd.org/PkgBase</a></p>


        <div class="footer">
    Powered by <a href="https://gohugo.io/">Hugo</a> with
    <a href="https://github.com/mrmierzejewski/hugo-theme-console/">Console Theme</a>. 
</div>

    </div>
  </body>
</html>
